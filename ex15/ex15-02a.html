<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }
      table {
        margin-top: 50px;
        width: 600px;
        height: 160px;
        background-color: gray;
      }
      th,
      td {
        background-color: azure;
        text-align: center;
        width: 120px;
      }
      th {
        background-color: lightgray;
      }
      #box {
        width: 500px;
        height: 300px;
        background-color: lightgray;
        margin-top: 25px;
        padding: 40px;
        padding-right: 0px;

        display: flex;
        flex-direction: column;
        justify-content: space-evenly;
        box-sizing: border-box;
        box-shadow: 10px 10px 20px rgba(0, 0, 0, 0.5);
      }
      #box div {
        height: 30px;
        margin: 5px;
        background-color: slategray;
        color: white;
        text-align: end;

        line-height: 175%;
        box-shadow: 10px 10px 20px rgba(0, 0, 0, 0.5);
      }
      #box div:hover {
        transform: scale(1.2);
        transition: transform 0.3s ease;
      }

      .btn {
        align-items: center;

        margin-top: 25px;
      }
    </style>
  </head>
  <body>
    <table>
      <thead>
        <tr>
          <th>등급</th>
          <th>유니크(3%)</th>
          <th>레어(10%)</th>
          <th>매직(40%)</th>
          <th>일반</th>
          <th>총합</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>확률</th>
          <td id="u"></td>
          <td id="r"></td>
          <td id="m"></td>
          <td id="c"></td>
          <td id="t"></td>
        </tr>
        <tr>
          <th>개수</th>
          <td id="un"></td>
          <td id="rn"></td>
          <td id="mn"></td>
          <td id="cn"></td>
          <td id="tn"></td>
        </tr>
      </tbody>
    </table>
    <div class="btn">
      <button onclick="location.reload(true)">새로고침</button>
      <button onclick="alert('아이템 확률입니다')">팝업</button>
    </div>
    <div id="box">
      <div id="ug"></div>
      <div id="rg"></div>
      <div id="mg"></div>
      <div id="cg"></div>
    </div>
  </body>
  <script>
    let n = 0;
    const list = [0, 0, 0, 0];
    while (n < 100000) {
      const ran = Math.floor(Math.random() * 100);

      if (ran < 3) {
        list[0] += 1;
      } else if (ran < 13) {
        list[1] += 1;
      } else if (ran < 53) {
        list[2] += 1;
      } else {
        list[3] += 1;
      }
      n++;
    }
    let total = list[0] + list[1] + list[2] + list[3];

    document.getElementById("un").textContent = list[0];
    document.getElementById("rn").textContent = list[1];
    document.getElementById("mn").textContent = list[2];
    document.getElementById("cn").textContent = list[3];
    document.getElementById("tn").textContent = total;

    document.getElementById("u").textContent = (
      (list[0] / total) *
      100
    ).toFixed(2);
    document.getElementById("r").textContent = (
      (list[1] / total) *
      100
    ).toFixed(2);
    document.getElementById("m").textContent = (
      (list[2] / total) *
      100
    ).toFixed(2);
    document.getElementById("c").textContent = (
      (list[3] / total) *
      100
    ).toFixed(2);
    document.getElementById("t").textContent =
      (list[0] / total) * 100 +
      (list[1] / total) * 100 +
      (list[2] / total) * 100 +
      (list[3] / total) * 100;

    document.getElementById("ug").style.width = (list[0] / total) * 100 + "%";
    document.getElementById("rg").style.width = (list[1] / total) * 100 + "%";
    document.getElementById("mg").style.width = (list[2] / total) * 100 + "%";
    document.getElementById("cg").style.width = (list[3] / total) * 100 + "%";

    document.getElementById("ug").textContent =
      ((list[0] / total) * 100).toFixed(1) + "%";
    document.getElementById("rg").textContent =
      ((list[1] / total) * 100).toFixed(1) + "%";
    document.getElementById("mg").textContent =
      ((list[2] / total) * 100).toFixed(1) + "%";
    document.getElementById("cg").textContent =
      ((list[3] / total) * 100).toFixed(1) + "%";
  </script>
</html>
