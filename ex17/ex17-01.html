<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bootstrap demo</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT"
      crossorigin="anonymous"
    />
    <style>
      body {
        background-color: rgba(0, 0, 0, 0.479);
      }
      .container {
        position: relative;
        top: 200px;

        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;

        border-radius: 15px;
        height: 50vh;
        width: 400px;
        gap: 20px;

        background-color: white;
      }
      .container div {
        width: 100%;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="form-floating mb-3">
        <input
          type="number"
          class="form-control"
          id="floatingInput"
          min="0"
          max="100"
          placeholder="값"
        />
        <label for="floatingInput">데이터 값 입력</label>
      </div>

      <div
        class="btn-group"
        role="group"
        aria-label="Basic mixed styles example"
      >
        <button type="button" class="btn btn-success" onclick="fnInp()">
          <span id="send" aria-hidden="true"></span>
          전송
        </button>
        <button type="button" class="btn btn-warning" onclick="fnRst()">
          <span id="cen"></span>
          취소
        </button>
      </div>

      <div
        class="progress"
        role="progressbar"
        aria-label="Info example"
        aria-valuenow="50"
        aria-valuemin="0"
        aria-valuemax="100"
      >
        <div
          class="progress-bar text-bg-info"
          style="width: 50%"
          id="progress1"
        >
          50%
        </div>
      </div>

      <h3 id="disp">입력값없음</h3>
    </div>

    <h3>
      Lorem ipsum dolor sit amet consectetur adipisicing elit. Labore, quia.
      Quasi explicabo facere, eos sunt eum molestiae, tempora quam quia quaerat
      ipsa nam non nobis aperiam reiciendis consectetur animi optio a. Est
      dolore soluta laborum, rem saepe sed at ullam id facilis laboriosam
      necessitatibus, recusandae quidem cumque. Repudiandae maiores tenetur,
      reprehenderit iusto vel cupiditate corrupti sequi ducimus fuga nostrum,
      laborum praesentium, omnis animi incidunt atque! Voluptatem animi non id
      dolore, esse placeat optio impedit fuga dignissimos laborum consequuntur
      rem dicta vel quidem autem voluptas totam possimus neque recusandae.
      Minima obcaecati ullam culpa distinctio et quisquam enim sit id nihil
      sunt!
    </h3>

    <script>
      const inp = document.querySelector("#floatingInput");
      const disp = document.querySelector("#disp");
      const prog = document.querySelector("#progress1");
      const send = document.querySelector("#send");
      const cen = document.querySelector("#cen");
      const btn = document.querySelector(".btn");

      // const fnInp = () => (disp.textContent = inp.value);
      const fnInp = () => {
        disp.textContent = inp.value;
        prog.textContent = `${inp.value}%`;
        prog.style.width = `${inp.value}%`;

        /* 로딩상태 */
        prog.classList.add("progress-bar-striped");
        send.classList.add("spinner-border", "spinner-border-sm");
        cen.classList.add("spinner-border", "spinner-border-sm");
        btn.disabled = true;

        setTimeout(() => fnLoaded(), 500);

        /* 바 색상 변경 */
        if (inp.value <= 25) {
          console.log("green v<=25");
          fnCreset();
          prog.classList.add("text-bg-success");
        } else if (25 < inp.value && inp.value <= 50) {
          console.log("blue 25<v<=50");
          fnCreset();
          prog.classList.add("text-bg-info");
        } else if (50 < inp.value && inp.value <= 75) {
          console.log("yellow 50<v<=75");
          fnCreset();
          prog.classList.add("text-bg-warning");
        } else if (75 < inp.value) {
          console.log("red 75<v");
          fnCreset();
          prog.classList.add("text-bg-danger");
        }
      };

      const fnRst = () => {
        disp.textContent = "";
        inp.value = "";
        prog.style.width = "0%";
      };

      // const fnLoad = () => {
      //   prog.classList.toggle("progress-bar-striped");
      // };

      const fnLoaded = () => {
        prog.classList.remove("progress-bar-striped");
        send.classList.remove("spinner-border", "spinner-border-sm");
        cen.classList.remove("spinner-border", "spinner-border-sm");
        btn.disabled = false;
      };

      const fnCreset = () => {
        prog.classList.remove("text-bg-success");
        prog.classList.remove("text-bg-info");
        prog.classList.remove("text-bg-warning");
        prog.classList.remove("text-bg-danger");
      };
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
